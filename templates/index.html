<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Agent Based Traffic Simulation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/sim.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸš— Agent Based Traffic Simulation</h1>
        <p class="subtitle">Resize, zoom, and pan</p>
      </header>

      <div class="controls">
        <div class="row">
          <div class="upper-wrap">
            <button class="btn-traffic" onclick="initSimulation('traffic')">
              Initialize Traffic
            </button>
            <button class="btn-demo" onclick="initSimulation('demo')">
              Initialize Demo
            </button>
            <button
              class="btn-start"
              id="startBtn"
              onclick="startSimulation()"
              disabled
            >
              Start
            </button>
            <button
              class="btn-stop"
              id="stopBtn"
              onclick="stopSimulation()"
              disabled
            >
              Stop
            </button>
            <button class="btn-reset" onclick="resetSimulation()">Reset</button>
            <button id="toggleSense">Sensing: On</button>
          </div>

          <div class="zoom-wrap">
            <button id="zoomOutBtn" title="Zoom Out">âˆ’</button>
            <input
              id="zoomSlider"
              type="range"
              min="0.25"
              max="4"
              step="0.05"
              value="1"
            />
            <button id="zoomInBtn" title="Zoom In">+</button>
            <span id="zoomLabel">100%</span>
            <button id="resetViewBtn" title="Reset view">Reset View</button>
          </div>
        </div>
      </div>

      <div class="status" id="status">
        No simulation loaded. Click a button above to initialize.
      </div>

      <div class="canvas-shell">
        <div class="viewport" id="viewport">
          <canvas id="simulationCanvas"></canvas>
        </div>
      </div>

      <div class="lower-controls">
        <div class="row" style="font-size: 13px; color: #666">
          Tips: drag to pan. Scroll to zoom at cursor. Keys:
          <span class="kbd">+</span>, <span class="kbd">âˆ’</span>,
          <span class="kbd">0</span>.
        </div>
      </div>

      <div class="info">
        Step: <span id="stepCount">0</span> 
        | Agents: <span id="agentCount">0</span>
        | Data: <span id="aggregateData">0</span>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/sim.js') }}"></script>
  </body>
</html>
